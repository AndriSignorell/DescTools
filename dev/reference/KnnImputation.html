<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Fill in NA values with the values of the nearest neighbours — ImputeKnn • DescTools</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/spacelab/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



  <link href="../extra.css" rel="stylesheet">
  

<meta property="og:title" content="Fill in NA values with the values of the nearest neighbours — ImputeKnn" />
<meta property="og:description" content="Function that fills in all NA values using the k Nearest
Neighbours of each case with NA values.
By default it uses the values of the neighbours and 
obtains an weighted (by the distance to the case) average
of their values to fill in the unknows.
If meth='median' it uses the median/most frequent value,
instead." />


<meta name="robots" content="noindex">

<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">DescTools</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.99.40.9</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Tutorials
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">PDF:</li>
    <li>
      <a href="../articles/DescToolsCompanion.pdf">Desc Tools Companion</a>
    </li>
    <li>
      <a href="../articles/TablesInR.pdf">Tables in R</a>
    </li>
    <li>
      <a href="../articles/Combinatorics.pdf">Combinatorics</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/AndriSignorell/DescTools/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Fill in NA values with the values of the nearest neighbours</h1>
    
    <div class="hidden name"><code>KnnImputation.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Function that fills in all NA values using the k Nearest
Neighbours of each case with NA values.
By default it uses the values of the neighbours and 
obtains an weighted (by the distance to the case) average
of their values to fill in the unknows.
If meth='median' it uses the median/most frequent value,
instead.</p>
    </div>

    <pre class="usage"><span class='fu'>ImputeKnn</span><span class='op'>(</span><span class='va'>data</span>, k <span class='op'>=</span> <span class='fl'>10</span>, scale <span class='op'>=</span> <span class='cn'>T</span>, meth <span class='op'>=</span> <span class='st'>"weighAvg"</span>, distData <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>A data frame with the data set</p></td>
    </tr>
    <tr>
      <th>k</th>
      <td><p>The number of nearest neighbours to use (defaults to 10)</p></td>
    </tr>
    <tr>
      <th>scale</th>
      <td><p>Boolean setting if the data should be scale before finding the nearest neighbours (defaults
to T)</p></td>
    </tr>
    <tr>
      <th>meth</th>
      <td><p>String indicating the method used to calculate the value to fill in each
NA. Available values are 'median' or 'weighAvg' (the default).</p></td>
    </tr>
    <tr>
      <th>distData</th>
      <td><p>Optionally you may sepecify here a data frame containing the data set
  that should be used to find the neighbours. This is usefull when
  filling in NA values on a test set, where you should use only
  information from the training set. This defaults to NULL, which means
  that the neighbours will be searched in <code>data</code></p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This function uses the k-nearest neighbours to fill in the unknown (NA)
values in a data set. For each case with any NA value it will search for
its k most similar cases and use the values of these cases to fill in
the unknowns.</p>
<p>If <code>meth='median'</code>  the function will use either the median (in
case of numeric variables) or the most frequent value (in case of
factors), of the neighbours to fill in the NAs. If
<code>meth='weighAvg'</code> the function will use a weighted average of the
values of the neighbours. The weights are given by <code>exp(-dist(k,x)</code>
where <code><a href='https://rdrr.io/r/stats/dist.html'>dist(k,x)</a></code> is the euclidean distance between the case with
NAs (x) and the neighbour k.</p>
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A data frame without NA values</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Torgo, L. (2010) <em>Data Mining using R: learning with case studies</em>,
  CRC Press (ISBN: 9781439810187).</p>
<p><a href='https://www.dcc.fc.up.pt/~ltorgo/DataMiningWithR/'>https://www.dcc.fc.up.pt/~ltorgo/DataMiningWithR/</a></p>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Luis Torgo <a href='mailto:ltorgo@dcc.fc.up.pt'>ltorgo@dcc.fc.up.pt</a></p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='https://rdrr.io/r/stats/complete.cases.html'>complete.cases</a></code>, <code><a href='https://rdrr.io/r/stats/na.fail.html'>na.omit</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='va'>cleanPizza</span> <span class='op'>&lt;-</span> <span class='fu'>ImputeKnn</span><span class='op'>(</span><span class='va'>d.pizza</span><span class='op'>[</span>, <span class='op'>-</span><span class='fl'>2</span><span class='op'>]</span><span class='op'>)</span>   <span class='co'># no dates allowed</span>
<span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>cleanPizza</span><span class='op'>)</span>
</div><div class='output co'>#&gt;      index           week          weekday               area    
#&gt;  Min.   :   1   Min.   : 9.00   Min.   :1.000   Brent      :480  
#&gt;  1st Qu.: 303   1st Qu.:10.00   1st Qu.:3.000   Camden     :346  
#&gt;  Median : 605   Median :11.00   Median :5.000   Westminster:383  
#&gt;  Mean   : 605   Mean   :11.41   Mean   :4.443                    
#&gt;  3rd Qu.: 907   3rd Qu.:13.00   3rd Qu.:6.000                    
#&gt;  Max.   :1209   Max.   :14.00   Max.   :7.000                    
#&gt;                                                                  
#&gt;      count          rabate              price            operator  
#&gt;  Min.   :1.000   Length:1209        Min.   :  8.792   Allanah:370  
#&gt;  1st Qu.:2.000   Class :character   1st Qu.: 31.176   Maria  :391  
#&gt;  Median :3.000   Mode  :character   Median : 46.764   Rhonda :448  
#&gt;  Mean   :3.445                      Mean   : 48.734                
#&gt;  3rd Qu.:4.000                      3rd Qu.: 62.955                
#&gt;  Max.   :8.000                      Max.   :134.334                
#&gt;                                                                    
#&gt;        driver     delivery_min    temperature     wine_ordered   
#&gt;  Butcher  : 96   Min.   : 8.80   Min.   :19.30   Min.   :0.0000  
#&gt;  Carpenter:275   1st Qu.:17.40   1st Qu.:42.20   1st Qu.:0.0000  
#&gt;  Carter   :235   Median :24.40   Median :49.80   Median :0.0000  
#&gt;  Farmer   :118   Mean   :25.65   Mean   :47.84   Mean   :0.1561  
#&gt;  Hunter   :156   3rd Qu.:32.50   3rd Qu.:55.30   3rd Qu.:0.0000  
#&gt;  Miller   :125   Max.   :65.60   Max.   :64.80   Max.   :1.0000  
#&gt;  Taylor   :204                                                   
#&gt;  wine_delivered    wrongpizza          quality   
#&gt;  Min.   :0.0000   Length:1209        low   :229  
#&gt;  1st Qu.:0.0000   Class :character   medium:458  
#&gt;  Median :0.0000   Mode  :character   high  :522  
#&gt;  Mean   :0.1361                                  
#&gt;  3rd Qu.:0.0000                                  
#&gt;  Max.   :1.0000                                  
#&gt;                                                  </div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Andri Signorell.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


