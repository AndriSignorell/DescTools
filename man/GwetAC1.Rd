% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/GwetAC1.R
\name{GwetAC1}
\alias{GwetAC1}
\title{Gwet's AC1 for Multiple Raters (Nominal)}
\usage{
GwetAC1(
  x,
  y = NULL,
  conf.level = NA,
  ci.type = c("asymptotic", "bootstrap"),
  ...
)
}
\arguments{
\item{x}{For the default method: an \eqn{n \times m} matrix (or data.frame)
of ratings where rows are subjects and columns are raters. Entries are
nominal categories (factor, character, or integers); \code{NA} allowed.}

\item{y}{For the default method: an \eqn{n \times m} matrix (or data.frame)
of ratings where rows are subjects and columns are raters. Entries are
nominal categories (factor, character, or integers); \code{NA} allowed.}

\item{conf.level}{Confidence level for the interval (default \code{0.95}).}

\item{ci.type}{Type of confidence interval: one of
\code{"none"}, \code{"asymptotic"} (delta method), or \code{"bootstrap"}.}

\item{...}{Further arguments are passed to \code{BootCI()}  to control
type and parameters of the bootstrap confidence intervals.}
}
\value{
Named vector with est, lci and uci if confidence interval for AC1 if requested,
estimate only if not.
}
\description{
Computes Gwet's AC1 agreement coefficient for \emph{m >= 2} raters
and nominal categories, allowing missing ratings. The default method
accepts a subject-by-rater rating matrix or as alternative two vectors.
Use formula interface \code{y ~ id | rater}
(long format) via \code{\link{RaterFrame}()}.

It returns Gwet's AC1 along with an optional confidence interval based on
(i) an asymptotic delta-method variance or (ii) nonparametric bootstrap
over subjects.
}
\details{
Let \eqn{n} be the number of subjects and \eqn{m_s} the number of valid
ratings for subject \eqn{s}. For each subject, the observed pairwise
agreement is
\deqn{A_s = \frac{\sum_c {n_{sc} \choose 2}}{ {m_s \choose 2} },}
where \eqn{n_{sc}} is the number of raters assigning category \eqn{c} to
subject \eqn{s}. The overall observed agreement is
\eqn{P_o = \frac{1}{n}\sum_s A_s}.

Let \eqn{p_c} denote the overall prevalence of category \eqn{c} across all
ratings (all raters and subjects), and
\eqn{P_e = \sum_c p_c(1-p_c)}. Then Gwet's AC1 for multiple raters is
\deqn{AC1 = \frac{P_o - P_e}{1 - P_e}.}

For the asymptotic variance, we use a subject-level delta-method:
define the subject contribution vector
\eqn{g_s = \big(A_s,\ n_{s1}/\bar m,\dots,n_{sK}/\bar m\big)^\top},
where \eqn{\bar m} is the average number of ratings per subject and
\eqn{K} is the number of categories. The empirical covariance of
\eqn{g_s} yields (via delta-method) an estimate of \eqn{Var(AC1)}.

Bootstrap CIs resample subjects with replacement.
}
\examples{
# Wide example (5 subjects x 4 raters), nominal categories V/N/P:
d.ratings <- data.frame(
  subj = c("1","2","3","4","5"),
  rtr1 = factor(c("V","V","V","V","P"), levels=c("V","N","P")),
  rtr2 = factor(c("V","N","V","V","P"), levels=c("V","N","P")),
  rtr3 = factor(c("V","P","V","V","P"), levels=c("V","N","P")),
  rtr4 = factor(c("V","V","V","V","N"), levels=c("V","N","P"))
)
d.long <- reshape(d.ratings, varying=2:5, idvar="subj",
                  times=names(d.ratings)[2:5],
                  v.names="rat", timevar="rater",
                  direction="long",
                  new.row.names=seq(prod(dim(d.ratings))))

# Formula interface (long data):
# AC1(y ~ id | rater)
GwetAC1(RaterFrame(rat ~ subj | rater, data = d.long, drop.subj=TRUE), 
        ci = "asymptotic")

# Default interface (matrix/data.frame):
m <- as.matrix(d.ratings[,-1])
GwetAC1(m, ci = "bootstrap", B = 500, seed = 123)

}
\concept{{ ~irr }}
