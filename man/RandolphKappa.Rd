% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/RandolphKappa.R
\name{RandolphKappa}
\alias{RandolphKappa}
\alias{RandolphKappa.default}
\alias{RandolphKappa.formula}
\title{Randolph's Free-Marginal Multirater Kappa}
\usage{
RandolphKappa(x, ..., conf.level = NA)

\method{RandolphKappa}{default}(x, ..., conf.level = NA)

\method{RandolphKappa}{formula}(formula, data, subset, na.action, ..., conf.level = NA)
}
\arguments{
\item{x}{(Default method) A matrix of size \eqn{N \times m} with subjects in
rows and raters in columns; cells contain the assigned categories.}

\item{...}{Reserved for future extensions; currently unused.}

\item{conf.level}{Numeric confidence level (e.g., \code{0.95}) for bootstrap
confidence intervals. Currently no interval is computed; passing
\code{NA} (the default) skips any CI.}

\item{formula}{(Formula method) A model formula of the form
\code{response ~ subject + rater} describing ratings in long format.}

\item{data}{(Formula method) A \code{data.frame} containing the variables
referenced in \code{formula}.}

\item{subset}{(Formula method) Optional logical vector or expression to select
a subset of rows from \code{data}.}

\item{na.action}{(Formula method) A function indicating what should happen
when the data contain \code{NA}s.}
}
\value{
A numeric scalar: the value of Randolph's kappa.
}
\description{
Computes Randolph's free-marginal multirater kappa for \eqn{m} raters over
\eqn{N} subjects. This agreement coefficient does not assume fixed marginal
distributions (i.e., it is free-marginal).
}
\details{
Let \eqn{k} be the number of distinct categories across all ratings,
\eqn{m} the number of raters, and \eqn{N} the number of subjects. Randolph's
kappa is
\deqn{\kappa = \frac{P_o - 1/k}{1 - 1/k},}
where the observed agreement \eqn{P_o} is
\deqn{P_o = \frac{1}{N} \sum_{i=1}^{N} \frac{\max_j n_{ij}}{m}.}
Here, \eqn{n_{ij}} denotes the number of raters who assigned subject \eqn{i}
to category \eqn{j}; \eqn{\max_j n_{ij}} is the modal (most frequent)
category count per subject.

The \code{formula} method reshapes long-format data to a subjects\eqn{\times}raters
matrix internally (via \code{DescTools::.LongToSquare}) and then calls the
\code{default} method.
}
\examples{
## Matrix (subjects x raters), 5 subjects, 3 raters
x <- matrix(c(
  1,1,1,
  2,2,2,
  1,2,1,
  3,3,3,
  2,2,1
), ncol = 3, byrow = TRUE)
RandolphKappa(x)

## Long format with a formula
df <- data.frame(
  subject = rep(1:5, each = 3),
  rater   = rep(paste0("r", 1:3), times = 5),
  rating  = c(1,1,1, 2,2,2, 1,2,1, 3,3,3, 2,2,1)
)
RandolphKappa(rating ~ subject + rater, data = df)
}
\references{
Randolph, J. J. (2005). Free-Marginal Multirater Kappa (multirater \eqn{\kappa_{\mathrm{free}}}):
An Alternative to Fleissâ€™ Fixed-Marginal Multirater Kappa. Online submission.
}
\seealso{
\code{\link{KrippAlpha}}, \code{\link{KappaM}}
}
